// Generated by CoffeeScript 1.6.3
(function() {
  var CubeIcon;

  module.exports = function(opts) {
    return new CubeIcon(opts);
  };

  CubeIcon = (function() {
    function CubeIcon(opts) {
      var a, ch, cubeH, cubeW, cw, dz, face, faceName, faceTransforms, i, rotateX, rotateY, s, scale, shiftX, shiftY, showFaces, _i, _ignored, _ignoredB, _ignoredBack, _ignoredBottom, _ignoredRight, _len, _ref, _ref1, _ref2, _ref3, _ref4;
      if (opts == null) {
        opts = {};
      }
      showFaces = (_ref = opts.showFaces) != null ? _ref : ['left', 'top', 'front'];
      if ((opts.images != null) && Array.isArray(opts.images)) {
        a = opts.images;
        if (a.length === 0) {
          opts.top = opts.side = '';
        }
        if (a.length === 1) {
          opts.top = opts.side = a[0];
        }
        if (a.length === 2) {
          opts.top = a[0], opts.side = a[1];
        }
        if (a.length === 3) {
          opts.top = a[0], _ignored = a[1], opts.side = a[2];
        }
        if (a.length === 4) {
          opts.top = a[0], _ignoredB = a[1], opts.front = a[2], opts.left = a[3];
        }
        if (a.length === 5) {
          throw new Error('cube-icon images.length unrecognized 5');
        }
        if (a.length === 6) {
          _ignoredBack = a[0], opts.front = a[1], opts.top = a[2], _ignoredBottom = a[3], opts.left = a[4], _ignoredRight = a[5];
        }
        if (a.length > 6) {
          throw new Error('cube-icon requires images.length <= 6');
        }
      }
      if (opts.side != null) {
        opts.left = opts.front = opts.side;
      }
      rotateX = (_ref1 = opts.rotateX) != null ? _ref1 : -30;
      rotateY = (_ref2 = opts.rotateY) != null ? _ref2 : 45;
      scale = (_ref3 = opts.scale) != null ? _ref3 : 3.55;
      s = (_ref4 = opts.size) != null ? _ref4 : 16;
      this.container = document.createElement('div');
      cw = ch = 90;
      cubeW = Math.floor(ch / (1 - Math.sin(rotateX * Math.PI / 180)) - 2);
      cubeH = Math.ceil(cw / (1 + Math.cos(rotateY * Math.PI / 180)) + 1);
      shiftX = cw - s * scale - 5;
      shiftY = ch - s * scale + 5;
      this.container.setAttribute('style', "-webkit-transform: rotateX(" + rotateX + "deg) rotateY(" + rotateY + "deg) translateX(" + shiftX + "px) translateY(" + shiftY + "px) scale3d(" + scale + "," + scale + "," + scale + ");-webkit-transform-origin: 0 0;position: relative;-webkit-transform-style: preserve-3d;");
      dz = s / 2;
      faceTransforms = {
        front: "rotateY(   0deg ) translateZ( " + dz + "px )",
        back: "rotateX( 180deg ) translateZ( " + dz + "px )",
        right: "rotateY(  90deg ) translateZ( " + dz + "px )",
        left: "rotateY( -90deg ) translateZ( " + dz + "px )",
        top: "rotateX(  90deg ) translateZ( " + dz + "px )",
        bottom: "rotateX( -90deg ) translateZ( " + dz + "px )"
      };
      for (i = _i = 0, _len = showFaces.length; _i < _len; i = ++_i) {
        faceName = showFaces[i];
        face = document.createElement('div');
        face.setAttribute('style', "-webkit-transform-style: preserve-3d;-webkit-transform: " + faceTransforms[faceName] + ";position: absolute;border: 0.5px solid black;width: " + s + "px;height: " + s + "px;");
        face.style.backgroundImage = 'url(' + opts[faceName] + ')';
        this.container.style.webkitTransition = '-webkit-transform 1s';
        this.container.appendChild(face);
      }
    }

    return CubeIcon;

  })();

}).call(this);
